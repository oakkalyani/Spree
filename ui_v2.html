<html>
    <head>
        <link rel="stylesheet" href="button_tag.css">
        <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
        <script>filename="redirect.js"</script>
        <meta charset="UTF-8">
        <title>spree</title>
        <h1 style="text-align:center"> Spree POC </h1>
        <button onclick="getCurTime()" type="button">Get current time position</button>
        <hr>
            

          <div id="container">
            <video id="video" controls autoplay loop>
              <source src="knives_out.mp4" type="video/mp4">
            </video>

            <div id="changeVideo">
                <button onclick="productLink()" id = "link_to_ext"> </button>
              </div>
            <div id="shoppingButton">
             <button onclick="turnOn()" id = "spreeButton">Spree</button>
            </div>
            <script>
              var state = false
              var cur_link = ""

              var vid = document.getElementById("video");

              var red_coat_link = "https://www.amazon.com/dp/B079V3BX9N/ref=cm_gf_aahm_iaaa_d_p0_qd0_SoY408CIqSRoaddRUNic"
              var suit = "https://www.amazon.com/Utopia-Bedding-Premium-Filled-Pillows/dp/B071DFDF9N/?_encoding=UTF8&pd_rd_w=WNrI0&pf_rd_p=c638e3d4-046b-4753-9e53-3752c2d7f6a7&pf_rd_r=WHAAHXY4AV0B93XE4Z8X&pd_rd_r=cb140d1f-a71d-47ab-afca-b793dd1b0541&pd_rd_wg=BqKsH&ref_=pd_gw_hl_comp_mis_psims"
              var brown_sweater = "https://www.amazon.com/Casio-Womens-Classic-Leather-Synthetic-11WL-7ACF/dp/B01N2A2Y27/?_encoding=UTF8&pd_rd_w=RemJV&pf_rd_p=941cb758-a13e-46e5-873f-8fa9888b80e9&pf_rd_r=WHAAHXY4AV0B93XE4Z8X&pd_rd_r=cb140d1f-a71d-47ab-afca-b793dd1b0541&pd_rd_wg=BqKsH&ref_=pd_gw_srecs_l2ra"

              links_dict = {
                "red_coat_link": { "coord": [20, 20], "link": red_coat_link, "time": 0, "size": [400, 300]},
                "suit": { "coord": [20, 50], "link": suit, "time": 0, "size": [400, 300]},
                "brown_sweater": { "coord": [20, 400],  "link": brown_sweater, "time": 0, "size": [400, 300]} 
              };

              var x = document.getElementById("changeVideo");
                
                print(vid.currentTime)
                if(vid.currentTime > 9 && vid.currentTime < 10)  {
                  x.style.top = links_dict['red_coat_link']['coord'][0];
                  x.style.left = links_dict['red_coat_link']['coord'][1];

                  x.style.height = links_dict['red_coat_link']['size'][0];
                  x.style.width = links_dict['red_coat_link']['size'][1];

                  cur_link = links_dict['red_coat_link']['link'];
                  
                  if (state == true) x.style.display = "block";
                  else x.style.display = "none";
                }
                else if(vid.currentTime > 36 && vid.currentTime < 38) {
                  x.style.top = links_dict['suit']['coord'][0];
                  x.style.left = links_dict['suit']['coord'][1];

                  x.style.height = links_dict['suit']['size'][0];
                  x.style.width = links_dict['suit']['size'][1];

                  cur_link = links_dict['suit']['link'];

                  if (state == true) x.style.display = "block";
                  else x.style.display = "none";
                }
                else if(vid.currentTime > 51 && vid.currentTime < 53) {
                  x.style.top = links_dict['brown_sweater']['coord'][0];
                  x.style.left = links_dict['brown_sweater']['coord'][1];

                  x.style.height = links_dict['brown_sweater']['size'][0];
                  x.style.width = links_dict['brown_sweater']['size'][1];

                  cur_link = links_dict['brown_sweater']['link'];

                  if (state == true) x.style.display = "block";
                  else x.style.display = "none";
                }
                else {
                  x.style.display = "none";
                }

              function turnOn() {
                if (state === false)  {
                  document.getElementById("spreeButton").style.backgroundColor = 'green';
                  state = true;
                }
                else {
                  document.getElementById("spreeButton").style.backgroundColor = 'white';
                  state = false;
                }
              }

              // var vid = document.getElementById("video");

              // var red_coat_link = "https://www.amazon.com/dp/B079V3BX9N/ref=cm_gf_aahm_iaaa_d_p0_qd0_SoY408CIqSRoaddRUNic"
              // var suit = "https://www.amazon.com/Utopia-Bedding-Premium-Filled-Pillows/dp/B071DFDF9N/?_encoding=UTF8&pd_rd_w=WNrI0&pf_rd_p=c638e3d4-046b-4753-9e53-3752c2d7f6a7&pf_rd_r=WHAAHXY4AV0B93XE4Z8X&pd_rd_r=cb140d1f-a71d-47ab-afca-b793dd1b0541&pd_rd_wg=BqKsH&ref_=pd_gw_hl_comp_mis_psims"
              // var brown_sweater = "https://www.amazon.com/Casio-Womens-Classic-Leather-Synthetic-11WL-7ACF/dp/B01N2A2Y27/?_encoding=UTF8&pd_rd_w=RemJV&pf_rd_p=941cb758-a13e-46e5-873f-8fa9888b80e9&pf_rd_r=WHAAHXY4AV0B93XE4Z8X&pd_rd_r=cb140d1f-a71d-47ab-afca-b793dd1b0541&pd_rd_wg=BqKsH&ref_=pd_gw_srecs_l2ra"

              // links_dict = {
              //   "red_coat_link": { "coord": [20, 20], "link": red_coat_link, "time": 0, "size": [400, 300]},
              //   "suit": { "coord": [20, 50], "link": suit, "time": 0, "size": [400, 300]},
              //   "brown_sweater": { "coord": [20, 400],  "link": brown_sweater, "time": 0, "size": [400, 300]} 
              // };
// Timestamp for showing the link
              // vid.onmousemove = function(){
                // var x = document.getElementById("changeVideo");
                
                // print(vid.currentTime)
                // if(vid.currentTime > 9 && vid.currentTime < 10)  {
                //   x.style.top = links_dict['red_coat_link']['coord'][0];
                //   x.style.left = links_dict['red_coat_link']['coord'][1];

                //   x.style.height = links_dict['red_coat_link']['size'][0];
                //   x.style.width = links_dict['red_coat_link']['size'][1];

                //   cur_link = links_dict['red_coat_link']['link'];
                  
                //   if (state == true) x.style.display = "block";
                //   else x.style.display = "none";
                // }
                // else if(vid.currentTime > 36 && vid.currentTime < 38) {
                //   x.style.top = links_dict['suit']['coord'][0];
                //   x.style.left = links_dict['suit']['coord'][1];

                //   x.style.height = links_dict['suit']['size'][0];
                //   x.style.width = links_dict['suit']['size'][1];

                //   cur_link = links_dict['suit']['link'];

                //   if (state == true) x.style.display = "block";
                //   else x.style.display = "none";
                // }
                // else if(vid.currentTime > 51 && vid.currentTime < 53) {
                //   x.style.top = links_dict['brown_sweater']['coord'][0];
                //   x.style.left = links_dict['brown_sweater']['coord'][1];

                //   x.style.height = links_dict['brown_sweater']['size'][0];
                //   x.style.width = links_dict['brown_sweater']['size'][1];

                //   cur_link = links_dict['brown_sweater']['link'];

                //   if (state == true) x.style.display = "block";
                //   else x.style.display = "none";
                // }
                // else {
                //   x.style.display = "none";
                // }
              // }

              function productLink() {
                $('#video').trigger('pause');
                var win = window.open(cur_link, '_blank');
                win.focus();
              }
                </script>
          </div>          
    </head>
</html>
